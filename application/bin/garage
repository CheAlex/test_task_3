#!/usr/bin/env php
<?php

use CheAlex\Garage\VehicleProvider\Factory;
use CheAlex\Garage\DataSource\PhpArrayDataSource;
use CheAlex\Garage\Logger\EchoLogger;
use CheAlex\Garage\Garage;

ini_set('display_errors', true);
error_reporting(E_ALL);

require __DIR__.'/../vendor/autoload.php';

$fixturesFilePath = getenv('ECOMOTIZE_TASK_VEHICLES_FIXTURES_FILE_PATH');

$factory = new Factory(
    new PhpArrayDataSource($fixturesFilePath)
);

$logger = new EchoLogger();
$garage = new Garage('Ecomotize garage', $logger);

foreach ($factory->getVehicles() as $vehicle) {
    $garage->addVehicle($vehicle);
}

$garage->work();
